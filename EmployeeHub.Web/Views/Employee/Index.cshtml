@model EmployeePagedDto<EmployeeDto>

@{
    ViewData["Title"] = "Employees";
}

<h2>Employees</h2>
<p>
    <a asp-action="Add" class="btn btn-success">Add New Employee</a>
</p>

@if (Model.Data == null || Model.Data.Count == 0)
{
    <div class="alert alert-info">
        No employees found. You can add a new one above.
    </div>
}
else
{
    <div class="table-responsive">
        <table class="table-hover table-sm table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Active</th>
                    <!-- For the Department description -->
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var emp in Model.Data)
                {
                    <tr>
                        <td>@emp.Id</td>
                        <td>@emp.FullName</td>
                        <td>@emp.Email</td>
                        <td>
                            @if (emp.IsActive)
                            {
                                <span style="color: green;">&#10003;</span>
                            }
                            else
                            {
                                <span style="color: red;">&#10007;</span>
                            }
                        </td>
                        <!-- For the DepartmentDescription -->
                        <td>
                            <a asp-action="Update" asp-route-id="@emp.Id" class="btn btn-sm btn-secondary">Edit</a>
                            <a asp-action="Delete" asp-route-id="@emp.Id"
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('Are you sure you want to delete this employee?');">
                                Delete
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

<!-- pagination controls -->
@if (Model.TotalCount > Model.PageSize)
{
    <nav>
        <ul class="pagination">
            @if (Model.PageIndex > 1)
            {
                <li class="page-item">
                    <a class="page-link"
                       asp-action="Index"
                       asp-route-pageIndex="@(Model.PageIndex - 1)"
                       asp-route-pageSize="@Model.PageSize">
                        Previous
                    </a>
                </li>
            }
            <li class="page-item disabled">
                <span class="page-link">Page @Model.PageIndex</span>
            </li>
            @if ((Model.PageIndex * Model.PageSize) < Model.TotalCount)
            {
                <li class="page-item">
                    <a class="page-link"
                       asp-action="Index"
                       asp-route-pageIndex="@(Model.PageIndex + 1)"
                       asp-route-pageSize="@Model.PageSize">
                        Next
                    </a>
                </li>
            }
        </ul>
    </nav>
}
